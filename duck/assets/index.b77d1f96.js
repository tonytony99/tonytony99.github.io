import{S as t,P as i,W as e,G as s,T as o,R as n,C as a,M as h,a as d,b as r,A as c,c as p,d as l,e as w}from"./vendor.84a699de.js";const m=t=>Math.PI/180*t,x=new t,g=new w,u=new i(75,window.innerWidth/window.innerHeight,.1,1e3),z=new e({canvas:document.querySelector("#bg")}),y=new s;class P{constructor({x:t,z:i,theta:e}){const s=new d(new l(14,7,1,1),S);s.rotation.x=-Math.PI/2,s.rotation.z=e,s.position.y=.1,s.position.x=t,s.position.z=i,this.position=s.position,x.add(s)}}z.setPixelRatio(window.devicePixelRatio),z.setSize(window.innerWidth,window.innerHeight),u.position.y=20,u.rotation.x=0,u.rotation.y=0,u.rotation.z=0,u.position.x=0,u.position.z=-10,z.render(x,u);const M=(new o).load("textures/lawn_texture.jpg");M.wrapS=n,M.wrapT=n,M.repeat.set(20,20);let v=new a(100,100),b=new h({map:M}),I=new d(v,b);I.rotation.x=-Math.PI/2,I.position.y=0,I.position.x=0,I.position.z=0,x.add(I);const S=new h({map:(new o).load("textures/blanket_texture.png")});const A=[{x:-5,z:-20,theta:-3.1}].map((t=>new P(t))),R=new class{constructor(t,i){this.theta=t,this.target=i,this.state="created"}setState(t){this.state=t,this.action&&this.action.stop(),"approaching"===t&&(this.action=this.mixer.clipAction(this.model.animations[2]),this.action.play()),"watching"===t&&(this.action=this.mixer.clipAction(this.model.animations[0]),this.action.play())}updateRotation(){this.dx=this.model.scene.position.x-this.target.position.x,this.dz=this.model.scene.position.z-this.target.position.z,this.targetAngle=Math.PI+Math.atan2(this.dx,this.dz),this.model.scene.rotation.y=this.model.scene.rotation.y%(2*Math.PI),this.dr=(this.targetAngle-this.model.scene.rotation.y)%(2*Math.PI),Math.abs(this.dr)>.2&&(this.dr>=Math.PI?this.model.scene.rotation.y-=.05:this.model.scene.rotation.y+=.05)}updatePosition(){this.updateRotation(),this.dist=(this.dx**2+this.dz**2)**.5,this.dist>1&&(this.model.scene.position.x-=.2*this.dx/this.dist,this.model.scene.position.z-=.2*this.dz/this.dist)}async enter(){var t;this.model=await(t="with_peck.glb",new Promise(((i,e)=>{y.load(t,(t=>i(t)),null,e)}))),this.mixer=new p(this.model.scene),x.add(this.model.scene),this.model.scene.position.x=50*Math.cos(this.theta),this.model.scene.position.z=50*Math.sin(this.theta),this.updatePosition(),this.setState("approaching")}}(m(-90),A[0]),W=new r(16777215);W.position.set(5,5,5);const _=new c(16777215,2);x.add(W,_),function t(){"created"===R.state&&R.enter(),"approaching"===R.state&&(R.updatePosition(),R.dist<=1&&R.setState("watching")),"watching"===R.state&&(R.target=u,R.updateRotation()),requestAnimationFrame(t);var i=g.getDelta();R.mixer&&R.mixer.update(i),z.render(x,u)}(),window.addEventListener("deviceorientation",(t=>{var i=null===t.alpha?0:t.alpha,e=null===t.beta?0:t.beta,s=null===t.gamma?0:t.gamma;u.rotation.y=m(i),u.rotation.x=m(e-90),u.rotation.z=m(-s)}));

(this.webpackJsonpduck=this.webpackJsonpduck||[]).push([[0],{12:function(e,t,a){},13:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),r=a(7),s=a.n(r),i=(a(12),a(3)),o=a(2),l=(a(13),a(4)),x=a(0),h=function(e){var t=e.x,a=e.y,c=e.age;return Object(x.jsx)("g",{transform:"translate (".concat(t," ").concat(a,")"),children:Object(x.jsx)("rect",{x:-12,y:-15,height:30,width:24,fill:"white",style:{strokeWidth:3,stroke:"orange"},rx:4,opacity:.2+10/c})})},j=function(e){var t,a=e.x,c=e.y,n=(e.speed,e.angle),r=e.hasBread;return Object(x.jsxs)("g",{transform:"translate (".concat(a," ").concat(c,") rotate(").concat(n," ",0," ",0,")"),children:[r?Object(x.jsx)(h,{x:0,y:40,age:0}):Object(x.jsx)("g",{}),Object(x.jsx)("ellipse",(t={cy:0},Object(l.a)(t,"cy",0),Object(l.a)(t,"rx",15),Object(l.a)(t,"ry",20),Object(l.a)(t,"fill","grey"),t)),Object(x.jsx)("ellipse",{cx:0,cy:24,fill:"yellow",rx:7,ry:14}),Object(x.jsx)("circle",{cx:0,cy:16,fill:"green",r:"14"}),Object(x.jsx)("circle",{cx:-4,cy:19,fill:"#222",r:"3"}),Object(x.jsx)("circle",{cx:4,cy:19,fill:"#222",r:"3"})]})};var f=function(){var e={x:0,y:0},t=Object(c.useState)(0),a=Object(o.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)([{origin:{x:0,y:-800},x:0,y:-800,target:e,speed:50,hasBread:!1,hasExited:!1}]),l=Object(o.a)(s,2),f=l[0],y=l[1],d=Object(c.useState)([{angle:.2-Math.PI/2,speed:200,r:0,age:0,isTaken:!1}]),g=Object(o.a)(d,2),u=g[0],b=g[1],O=Object(c.useState)(!1),p=Object(o.a)(O,2),v=p[0],M=p[1],S=Object(c.useState)(0),w=Object(o.a)(S,2),m=w[0],k=w[1],J=Object(c.useState)(0),N=Object(o.a)(J,2),B=N[0],I=N[1],T=function(t,a){I(B+1);var c,n=JSON.parse(JSON.stringify(u)),r=Object(i.a)(n);try{for(r.s();!(c=r.n()).done;){var s=c.value;s.x=s.r*Math.cos(s.angle),s.y=s.r*Math.sin(s.angle),s.r+=s.speed,s.speed=Math.max(0,.5*s.speed-1),s.age+=1}}catch(E){r.e(E)}finally{r.f()}v&&k(m+1);var o=JSON.parse(JSON.stringify(t));o=o.filter((function(e){return e.target.x!==e.origin.x||e.target.y!==e.origin.y||Math.pow(Math.pow(e.x,2)+Math.pow(e.y,2),.5)<=700}));var l,x=Object(i.a)(o);try{for(x.s();!(l=x.n()).done;){var h,j=l.value,f=100,y=Object(i.a)(n);try{for(y.s();!(h=y.n()).done;){var d=h.value,g=j.x-d.x,O=j.y-d.y,p=Math.pow(Math.pow(g,2)+Math.pow(O,2),.5);p<f&!j.hasBread&&(f=p,j.target=d),p<40&&(j.hasBread=!0,d.isTaken=!0,j.target=j.origin,j.speed=50)}}catch(E){y.e(E)}finally{y.f()}}}catch(E){x.e(E)}finally{x.f()}if(n=n.filter((function(e){return e.age<=100&&!e.isTaken})),b(n),a(o),B%4===0){B%100||(o=function(t){var a=2*Math.random()*Math.PI,c=JSON.parse(JSON.stringify(t)),n=800*Math.cos(a),r=800*Math.sin(a);return c.push({x:n,y:r,origin:{x:n,y:r},target:e,speed:Math.floor(10+50*Math.random())}),c}(t));var M,S=Object(i.a)(o);try{for(S.s();!(M=S.n()).done;){var w=M.value,J=w.target.x-w.x,N=w.target.y-w.y,T=void 0;T=0===J?0:0===N?1:Math.abs(J)/(Math.abs(J)+Math.abs(N)),w.x+=Math.sign(J)*w.speed*T,w.y+=Math.sign(N)*w.speed*(1-T)}}catch(E){S.e(E)}finally{S.f()}a(o)}};Object(c.useEffect)((function(){var e=setInterval((function(){T(f,y)}),100);return function(){clearInterval(e)}}),[f,B,T]),Object(c.useEffect)((function(){window.addEventListener("deviceorientation",(function(e){r(e.alpha)})),r(0)}),[]);var E=function(e){var t=e.target.x-e.x,a=e.target.y-e.y;return 180/Math.PI*Math.atan2(a,t)};return Object(x.jsx)("div",{className:"App",children:Object(x.jsx)("header",{className:"App-header",children:Object(x.jsxs)("svg",{height:"700",viewBox:"-150 -700 300 700",width:"400",tabIndex:"0",onKeyDown:function(e){"a"===e.key&&r(n+4),"d"===e.key&&r(n-4)},onTouchStart:function(e){M(!0),k(0)},onTouchEnd:function(t){if(M(!1),null===n&&r(0),!(m<1)){var a=JSON.parse(JSON.stringify(u));a.push({x:e.x,y:e.y,angle:(270-n)*Math.PI/180,speed:50*m,r:0,age:0,label:Math.random().toString(36).substring(7)}),b(a)}},style:{border:"solid 1px green"},children:[Object(x.jsx)("rect",{x:"90",y:"-690",height:"100",width:"100",style:{fill:"rgb(255 255 255)",fillOpacity:.2}}),Object(x.jsxs)("g",{transform:"rotate (".concat(n," ").concat(140+100*e.x/1400," ").concat(100*e.y/1400-640,")"),children:[f.map((function(e,t){return Object(x.jsx)("circle",{cx:140+100*e.x/1400,cy:100*e.y/1400-640,fill:"rgb(".concat(40*e.speed," ").concat(100-8*e.speed," ").concat(150-30*e.speed,")"),r:2e3/700},t)})),Object(x.jsx)("circle",{cx:140+100*e.x/1400,cy:100*e.y/1400-640,fill:"green",r:2e3/1400})]}),Object(x.jsxs)("g",{transform:"rotate (".concat(n," ").concat(e.x," ").concat(e.y,")"),children:[Object(x.jsx)("circle",{cx:e.x,cy:e.y,r:5,fill:"green"}),u.map((function(e,t){return Object(x.jsx)(h,{x:e.x,y:e.y,age:e.age},t)})),f.map((function(e,t){return Object(x.jsx)(j,{x:e.x,y:e.y,speed:e.speed,hasBread:e.hasBread,angle:270+E(e)+(Math.floor(B/4)%2?-5:5)},t)}))]})]})})})},y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,16)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),r(e),s(e)}))};s.a.render(Object(x.jsx)(n.a.StrictMode,{children:Object(x.jsx)(f,{})}),document.getElementById("root")),y()}},[[15,1,2]]]);
//# sourceMappingURL=main.13ff4eb3.chunk.js.map
(this.webpackJsonpduck=this.webpackJsonpduck||[]).push([[0],{12:function(e,t,a){},13:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),r=a(7),s=a.n(r),i=(a(12),a(3)),o=a(2),l=(a(13),a(4)),j=a(0),x=function(e){var t=e.x,a=e.y,c=e.age;return Object(j.jsx)("g",{transform:"translate (".concat(t," ").concat(a,")"),children:Object(j.jsx)("rect",{x:-12,y:-15,height:30,width:24,fill:"white",style:{strokeWidth:3,stroke:"orange"},rx:4,opacity:.2+10/c})})},h=function(e){var t,a=e.x,c=e.y,n=(e.speed,e.angle),r=e.hasBread;return Object(j.jsxs)("g",{transform:"translate (".concat(a," ").concat(c,") rotate(").concat(n," ",0," ",0,")"),children:[r?Object(j.jsx)(x,{x:0,y:40,age:0}):Object(j.jsx)("g",{}),Object(j.jsx)("ellipse",(t={cy:0},Object(l.a)(t,"cy",0),Object(l.a)(t,"rx",15),Object(l.a)(t,"ry",20),Object(l.a)(t,"fill","grey"),t)),Object(j.jsx)("ellipse",{cx:0,cy:24,fill:"yellow",rx:7,ry:14}),Object(j.jsx)("circle",{cx:0,cy:16,fill:"green",r:"14"}),Object(j.jsx)("circle",{cx:-4,cy:19,fill:"#222",r:"3"}),Object(j.jsx)("circle",{cx:4,cy:19,fill:"#222",r:"3"})]})};var f=function(){var e={x:0,y:0},t=Object(c.useState)(0),a=Object(o.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(0),l=Object(o.a)(s,2),f=l[0],y=l[1],d=Object(c.useState)([{origin:{x:0,y:-800},x:0,y:-800,target:e,speed:50,hasBread:!1,hasExited:!1}]),g=Object(o.a)(d,2),u=g[0],b=g[1],O=Object(c.useState)([{angle:.2-Math.PI/2,speed:200,r:0,age:0,isTaken:!1}]),p=Object(o.a)(O,2),v=p[0],M=p[1],S=Object(c.useState)(!1),w=Object(o.a)(S,2),m=w[0],k=w[1],J=Object(c.useState)(0),N=Object(o.a)(J,2),B=N[0],I=N[1],T=Object(c.useState)(0),E=Object(o.a)(T,2),P=E[0],F=E[1],C=function(t,a){F(P+1);var c,n=JSON.parse(JSON.stringify(v)),s=Object(i.a)(n);try{for(s.s();!(c=s.n()).done;){var o=c.value;o.x=o.r*Math.cos(o.angle),o.y=o.r*Math.sin(o.angle),o.r+=o.speed,o.speed=Math.max(0,.5*o.speed-1),o.age+=1}}catch(E){s.e(E)}finally{s.f()}m&&I(B+1);var l=JSON.parse(JSON.stringify(t));l=l.filter((function(e){return e.target.x!==e.origin.x||e.target.y!==e.origin.y||Math.pow(Math.pow(e.x,2)+Math.pow(e.y,2),.5)<=700}));var j,x=Object(i.a)(l);try{for(x.s();!(j=x.n()).done;){var h,y=j.value,d=100,g=Object(i.a)(n);try{for(g.s();!(h=g.n()).done;){var u=h.value,b=y.x-u.x,O=y.y-u.y,p=Math.pow(Math.pow(b,2)+Math.pow(O,2),.5);p<d&!y.hasBread&&(d=p,y.target=u),p<40&&(y.hasBread=!0,u.isTaken=!0,y.target=y.origin,y.speed=50)}}catch(E){g.e(E)}finally{g.f()}}}catch(E){x.e(E)}finally{x.f()}if(n=n.filter((function(e){return e.age<=100&&!e.isTaken})),M(n),a(l),r(f),P%4===0){P%100||(l=function(t){var a=2*Math.random()*Math.PI,c=JSON.parse(JSON.stringify(t)),n=800*Math.cos(a),r=800*Math.sin(a);return c.push({x:n,y:r,origin:{x:n,y:r},target:e,speed:Math.floor(5+50*Math.random())}),c}(t));var S,w=Object(i.a)(l);try{for(w.s();!(S=w.n()).done;){var k=S.value,J=k.target.x-k.x,N=k.target.y-k.y,T=void 0;T=0===J?0:0===N?1:Math.abs(J)/(Math.abs(J)+Math.abs(N)),k.x+=Math.sign(J)*k.speed*T,k.y+=Math.sign(N)*k.speed*(1-T)}}catch(E){w.e(E)}finally{w.f()}a(l)}};Object(c.useEffect)((function(){var e=setInterval((function(){C(u,b)}),100);return function(){clearInterval(e)}}),[u,P,C]),Object(c.useEffect)((function(){window.addEventListener("deviceorientation",(function(e){y(e.alpha)})),y(0)}),[]);var L=function(e){var t=e.target.x-e.x,a=e.target.y-e.y;return 180/Math.PI*Math.atan2(a,t)};return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)("header",{className:"App-header",children:Object(j.jsxs)("svg",{height:"700",viewBox:"-150 -700 300 700",width:"400",tabIndex:"0",onKeyDown:function(e){"a"===e.key&&r(n+4),"d"===e.key&&r(n-4)},onTouchStart:function(e){k(!0),I(0)},onTouchEnd:function(t){if(k(!1),null===n&&r(0),!(B<1)){console.log("throw",B,n);var a=JSON.parse(JSON.stringify(v));a.push({x:e.x,y:e.y,angle:(270-n)*Math.PI/180,speed:50*B,r:0,age:0,label:Math.random().toString(36).substring(7)}),M(a)}},style:{border:"solid 1px green"},children:[Object(j.jsx)("rect",{x:"90",y:"-690",height:"100",width:"100",style:{fill:"rgb(255 255 255)",fillOpacity:.2}}),Object(j.jsxs)("g",{transform:"rotate (".concat(n," ").concat(140+100*e.x/1400," ").concat(100*e.y/1400-640,")"),children:[u.map((function(e,t){return Object(j.jsx)("circle",{cx:140+100*e.x/1400,cy:100*e.y/1400-640,fill:"rgb(".concat(40*e.speed," ").concat(100-8*e.speed," ").concat(150-30*e.speed,")"),r:2e3/700},t)})),Object(j.jsx)("circle",{cx:140+100*e.x/1400,cy:100*e.y/1400-640,fill:"green",r:2e3/1400})]}),Object(j.jsxs)("g",{transform:"rotate (".concat(n," ").concat(e.x," ").concat(e.y,")"),children:[Object(j.jsx)("circle",{cx:e.x,cy:e.y,r:5,fill:"green"}),v.map((function(e,t){return Object(j.jsx)(x,{x:e.x,y:e.y,age:e.age},t)})),u.map((function(e,t){return Object(j.jsx)(h,{x:e.x,y:e.y,speed:e.speed,hasBread:e.hasBread,angle:270+L(e)+(Math.floor(P/4)%2?-5:5)},t)}))]})]})})})},y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,16)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),r(e),s(e)}))};s.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(f,{})}),document.getElementById("root")),y()}},[[15,1,2]]]);
//# sourceMappingURL=main.0319632f.chunk.js.map
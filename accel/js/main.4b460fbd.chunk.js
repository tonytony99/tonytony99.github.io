(this.webpackJsonpduck=this.webpackJsonpduck||[]).push([[0],{215:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a.n(c),r=a(77),s=a.n(r),i=(a(83),a(17)),o=a(7),l=(a(84),a(0)),x=function(e){var t=e.x,a=e.y,c=e.age;return Object(l.jsx)("g",{transform:"translate (".concat(t," ").concat(a,")"),children:Object(l.jsx)("rect",{x:-12,y:-15,height:30,width:24,fill:"white",style:{strokeWidth:3,stroke:"orange"},rx:4,opacity:.2+10/c})})},h=function(e){var t=e.x,a=e.y,c=(e.speed,e.angle),n=e.hasBread;return Object(l.jsxs)("g",{transform:"translate (".concat(t," ").concat(a,") rotate(").concat(c," ",0," ",0,")"),children:[n?Object(l.jsx)(x,{x:0,y:40,age:0}):Object(l.jsx)("g",{}),Object(l.jsx)("ellipse",{cx:0,cy:0,rx:15,ry:20,fill:"grey"}),Object(l.jsx)("ellipse",{cx:0,cy:24,fill:"yellow",rx:7,ry:14}),Object(l.jsx)("circle",{cx:0,cy:16,fill:"green",r:"14"}),Object(l.jsx)("circle",{cx:-4,cy:19,fill:"#222",r:"3"}),Object(l.jsx)("circle",{cx:4,cy:19,fill:"#222",r:"3"})]})},j=a(78);var f=function(){var e={x:0,y:0},t=Object(c.useState)(0),a=Object(o.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(0),f=Object(o.a)(s,2),y=f[0],d=f[1],g=Object(c.useState)([{origin:{x:0,y:-800},x:0,y:-800,target:e,speed:50,hasBread:!1,hasExited:!1}]),u=Object(o.a)(g,2),b=u[0],O=u[1],p=Object(c.useState)([{angle:.2-Math.PI/2,speed:200,r:0,age:0,isTaken:!1}]),v=Object(o.a)(p,2),M=v[0],S=v[1],w=Object(c.useState)(!1),m=Object(o.a)(w,2),k=m[0],B=m[1],J=Object(c.useState)(0),N=Object(o.a)(J,2),I=N[0],T=N[1],E=Object(c.useState)(0),P=Object(o.a)(E,2),F=P[0],C=P[1];Object(c.useEffect)((function(){var t=setInterval((function(){!function(){C(F+1);var t,a=JSON.parse(JSON.stringify(M)),c=Object(i.a)(a);try{for(c.s();!(t=c.n()).done;){var n=t.value;n.x=n.r*Math.cos(n.angle),n.y=n.r*Math.sin(n.angle),n.r+=n.speed,n.speed=Math.max(0,.5*n.speed-1),n.age+=1}}catch(E){c.e(E)}finally{c.f()}k&&T(I+1);var s=JSON.parse(JSON.stringify(b));s=s.filter((function(e){return e.target.x!==e.origin.x||e.target.y!==e.origin.y||Math.pow(Math.pow(e.x,2)+Math.pow(e.y,2),.5)<=700}));var o,l=Object(i.a)(s);try{for(l.s();!(o=l.n()).done;){var x=o.value,h=100;x.hasBread||(x.target=e);var j,f=Object(i.a)(a);try{for(f.s();!(j=f.n()).done;){var d=j.value,g=x.x-d.x,u=x.y-d.y,p=Math.pow(Math.pow(g,2)+Math.pow(u,2),.5);p<h&!x.hasBread&&(h=p,x.target=d),p<40&&(x.hasBread=!0,d.isTaken=!0,x.target=x.origin,x.speed=50)}}catch(E){f.e(E)}finally{f.f()}}}catch(E){l.e(E)}finally{l.f()}if(a=a.filter((function(e){return e.age<=100&&!e.isTaken})),S(a),O(s),r(y),F%4===0){F%100||(s=function(t){var a=2*Math.random()*Math.PI,c=JSON.parse(JSON.stringify(t)),n=800*Math.cos(a),r=800*Math.sin(a);return c.push({x:n,y:r,origin:{x:n,y:r},target:e,speed:Math.floor(20+50*Math.random())}),c}(b));var v,w=Object(i.a)(s);try{for(w.s();!(v=w.n()).done;){var m=v.value,B=m.target.x-m.x,J=m.target.y-m.y,N=void 0;N=0===B?0:0===J?1:Math.abs(B)/(Math.abs(B)+Math.abs(J)),m.x+=Math.sign(B)*m.speed*N,m.y+=Math.sign(J)*m.speed*(1-N)}}catch(E){w.e(E)}finally{w.f()}O(s)}}()}),100);return function(){clearInterval(t)}}),[b,F,M,y,k,e,I]);var L=function(e){d(e.alpha)};Object(c.useEffect)((function(){window.addEventListener("deviceorientation",Object(j.debounce)(L,20)),d(0)}),[]);var A=function(e){var t=e.target.x-e.x,a=e.target.y-e.y;return 180/Math.PI*Math.atan2(a,t)};return Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)("header",{className:"App-header",children:["v0.3",Object(l.jsxs)("svg",{height:"700",viewBox:"-150 -700 300 700",width:"400",tabIndex:"0",onKeyDown:function(e){"a"===e.key&&r(n+4),"d"===e.key&&r(n-4)},onTouchStart:function(e){B(!0),T(0)},onTouchEnd:function(t){if(B(!1),null===n&&r(0),!(I<1)){console.log("throw",I,n);var a=JSON.parse(JSON.stringify(M));a.push({x:e.x,y:e.y,angle:(270-n)*Math.PI/180,speed:50*I,r:0,age:0,label:Math.random().toString(36).substring(7)}),S(a)}},style:{border:"solid 1px green"},children:[Object(l.jsx)("rect",{x:"90",y:"-690",height:"100",width:"100",style:{fill:"rgb(255 255 255)",fillOpacity:.2}}),Object(l.jsxs)("g",{transform:"rotate (".concat(n," ").concat(140+100*e.x/1400," ").concat(100*e.y/1400-640,")"),children:[b.map((function(e,t){return Object(l.jsx)("circle",{cx:140+100*e.x/1400,cy:100*e.y/1400-640,fill:"rgb(".concat(40*e.speed," ").concat(100-8*e.speed," ").concat(150-30*e.speed,")"),r:2e3/700},t)})),Object(l.jsx)("circle",{cx:140+100*e.x/1400,cy:100*e.y/1400-640,fill:"green",r:2e3/1400})]}),Object(l.jsxs)("g",{transform:"rotate (".concat(n," ").concat(e.x," ").concat(e.y,")"),children:[Object(l.jsx)("circle",{cx:e.x,cy:e.y,r:5,fill:"green"}),M.map((function(e,t){return Object(l.jsx)(x,{x:e.x,y:e.y,age:e.age},t)})),b.map((function(e,t){return Object(l.jsx)(h,{x:e.x,y:e.y,speed:e.speed,hasBread:e.hasBread,angle:270+A(e)+(Math.floor(F/4)%2?-5:5)},t)}))]})]})]})})},y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,216)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),c(e),n(e),r(e),s(e)}))};s.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(f,{})}),document.getElementById("root")),y()},83:function(e,t,a){},84:function(e,t,a){}},[[215,1,2]]]);
//# sourceMappingURL=main.4b460fbd.chunk.js.map